<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Hotel List</title>
  <style>
    body{margin:1em;font-family:system-ui;background:#fff;color:#000}
    table{border-collapse:collapse;width:100%}
    th,td{border:1px solid #ccc;padding:.4em .6em;text-align:left}
    th{cursor:pointer}
  </style>
</head>
<body>
  <h1>Hotel List</h1>

  <table id="t">
    <thead>
      <tr>
        <th>Hotel</th>
        <th>Area&nbsp;/&nbsp;Town</th>
        <th>Full&nbsp;Address</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
const jsonPath = './hotels_geocoded.json';
const tbody = document.querySelector('#t tbody');
let hotels = [];

const AREA_FALLBACK = '—';
fetch(jsonPath)
  .then(r => r.json())
  .then(data => {
    hotels = data.map(h => ({
      ...h,
      Area: h.Area?.trim() ? h.Area :
            h.Address?.includes(',') ?
            h.Address.split(',').slice(-2)[0].trim() :
            AREA_FALLBACK
    }));
    hotels.sort((a,b)=> a.Name.localeCompare(b.Name,'en',{sensitivity:'base'})); // A→Z
    render('Name');      // renders ascending
  })
  .catch(console.error);

let dir = 1;
function render(col){
  dir *= -1;
  tbody.innerHTML = '';
  hotels
    .slice()
    .sort((a,b)=> a[col]?.localeCompare?.(b[col],undefined,{sensitivity:'base'}) * dir)
    .forEach(h=>tbody.insertAdjacentHTML('beforeend',
      `<tr><td>${h.Name}</td><td>${h.Area}</td><td>${h.Address}</td></tr>`));
}

/* map header text to actual object key */
const keyMap = {'hotel': 'Name', 'area': 'Area', 'address': 'Address'};
document.querySelectorAll('th').forEach(th=>{
  const base = th.textContent.toLowerCase();
  th.addEventListener('click', ()=>render(keyMap[base.match(/(\w+)/)[0]]));
});
</script>
</body>
</html>
