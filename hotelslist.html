<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Hotel List</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <!-- === GOOGLE ANALYTICS — inserted by Arya === -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-65E3WHQ7FL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-65E3WHQ7FL');
  </script>

  <style>
    :root{
      --blue:#388DCD;
      --text:#000;
      --muted:#555;
      --bg:#fff;
      --zebra:#f5f5f5;
      --border:#ccc;
      --focus:#0b6fb8;
      --gap:1.4rem;
      --pad:clamp(.75rem,3vw,2.5rem);
      --radius:6px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Roboto,system-ui,-apple-system,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--text);font-size:.875rem;line-height:1.5;display:flex;flex-direction:column;align-items:center;gap:var(--gap)}
    h1{margin:0;text-align:center;color:#000;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700}
    p.lead{margin:0;text-align:center;color:var(--muted);font-size:clamp(.95rem,2.6vw,1.15rem)}
    .controls{display:flex;align-items:center;gap:.75rem;width:100%;padding-inline:var(--pad);max-width:1200px;flex-wrap:wrap}
    .controls .count{color:var(--muted)}
    .controls .spacer{flex:1 1 auto}
    .search{display:flex;align-items:center;gap:.5rem;margin-left:auto}
    .search input{font:inherit;padding:.5rem .65rem;border:1px solid var(--border);border-radius:var(--radius);min-width:220px}
    .table-wrap{width:100%;padding-inline:var(--pad);max-width:1200px;overflow:auto}
    table{width:100%;border-collapse:collapse;font-size:.875rem;min-width:640px}
    caption{text-align:left;padding:.25rem 0 .5rem;color:var(--muted);font-weight:400}
    thead th,td{border:1px solid var(--border);padding:.5em .8em;vertical-align:top}
    thead th{position:sticky;top:0;background:var(--blue);color:#fff;z-index:1}
    thead th button{all:unset;cursor:pointer;display:inline-flex;align-items:center;gap:.4em;padding:.35rem .4rem;border-radius:.35rem}
    .arrow{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:6px solid #fff;transition:transform .15s, opacity .15s}
    tbody tr:nth-child(odd) td{background:var(--zebra)}
    tbody tr:hover td{background:#eaf3fb}
    th[data-col="Name"],td[data-col="Name"]{width:22%}
    th[data-col="Area"],td[data-col="Area"]{width:16%;white-space:nowrap}
    th[data-col="Address"],td[data-col="Address"]{width:62%}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap}
    .skeleton{position:relative;overflow:hidden;background:linear-gradient(90deg,#eee 25%,#f6f6f6 37%,#eee 63%);background-size:400% 100%;animation:sheen 1.1s linear infinite;color:transparent}
    @keyframes sheen{0%{background-position:100% 0}100%{background-position:0 0}}
  </style>
</head>
<body>
  <h1>Hotels List</h1>
  <p class="lead">Below is every Hotel / HMO identified on the map. Click a column to sort.</p>

  <div class="controls" aria-live="polite">
    <div class="count" id="count">Loading…</div>
    <div class="spacer" aria-hidden="true"></div>
    <label class="search" for="q">
      <span class="sr-only">Filter hotels</span>
      <input id="q" type="search" placeholder="Filter by name, area, address" autocomplete="off" />
    </label>
  </div>

  <div class="table-wrap">
    <table id="t" aria-describedby="count">
      <caption class="sr-only">Sortable list of hotels</caption>
      <thead>
        <tr>
          <th data-col="Name" scope="col" aria-sort="none" data-active="false" data-dir="desc">
            <button type="button" aria-label="Sort by Hotel">Hotel <span class="arrow"></span></button>
          </th>
          <th data-col="Area" scope="col" aria-sort="none" data-active="false" data-dir="desc">
            <button type="button" aria-label="Sort by Area">Area <span class="arrow"></span></button>
          </th>
          <th data-col="Address" scope="col" aria-sort="ascending" data-active="true" data-dir="asc">
            <button type="button" aria-label="Sort by Full Address">Full Address <span class="arrow"></span></button>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="3" class="skeleton">Loading…</td></tr>
      </tbody>
    </table>
  </div>

  <script>
  (()=>{
    const table=document.getElementById('t'),tbody=table.querySelector('tbody');
    const state={data:[],filtered:[],sortKey:'Address',sortDir:'asc',filter:''};
    state.filter=(new URLSearchParams(location.search).get('q')||localStorage.getItem('hotels.filter')||'');
    state.sortKey=(new URLSearchParams(location.search).get('sort')||localStorage.getItem('hotels.sortKey')||'Address');
    state.sortDir=(new URLSearchParams(location.search).get('dir')||localStorage.getItem('hotels.sortDir')||'asc');
    const coll=new Intl.Collator(document.documentElement.lang||undefined,{numeric:true});
    function apply(){
      state.filtered=!state.filter?[...state.data]:state.data.filter(h=>[h.Name,h.Area,h.Address].some(v=>v.toLowerCase().includes(state.filter.trim().toLowerCase())));
      state.filtered.sort((a,b)=>{
        const ax=a[state.sortKey]||'',bx=b[state.sortKey]||'';
        const c=coll.compare(ax,bx);
        if(c)return c*(state.sortDir==='asc'?1:-1);
        return coll.compare(a.Address, b.Address)*(state.sortDir==='asc'?1:-1);
      });
      tbody.innerHTML='';
      if(state.filtered.length===0){tbody.innerHTML='<tr><td colspan="3" style="text-align:center">No data found.</td></tr>';return}
      state.filtered.forEach(h=>{
        const tr=document.createElement('tr');
        ['Name','Area','Address'].forEach(k=>{
          const td=document.createElement('td');
          td.dataset.col=k;
          td.textContent=h[k]||'—';
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
    }
    async function init(){
      fetch('./hotels_geocoded.json').then(r=>r.json()).then(list=>{
        state.data=list;sanitize();apply();localStorage.setItem('hotels.count',list.length);
      }).catch(()=>{tbody.innerHTML='<tr><td colspan="3">Error loading data.</td></tr>'});
    }
    function sanitize(){}
    init();
  })();
  </script>
</body>
</html>
