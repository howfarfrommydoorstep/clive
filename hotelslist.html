<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Hotel List</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body{margin:0;font-family:Roboto,sans-serif;background:#fff;color:#000;font-size:.875rem;line-height:1.5}
  table{width:100%;border-collapse:collapse;font-size:.875rem}
  th,td{border:1px solid #ccc;padding:.5em .8em}
  th{background:#388DCD;color:#fff;cursor:pointer}
  tr:nth-child(odd) td{background:#f5f5f5}
  .arrow{font-size:.75em;margin-left:.3em}
</style>
</head>

<body style="display:grid;gap:1.4rem;place-items:center">

<h1 style="margin:0;text-align:center;color:#000;font-size:clamp(1.8rem,4vw,2.6rem);font-weight:700">Hotels List</h1>

<p style="margin:0;text-align:center;color:#555;font-size:clamp(.95rem,2.6vw,1.15rem)">
Below is every Hotel / HMO identified on the map. Click a column to sort.
</p>

<div style="padding-inline:clamp(.75rem,3vw,2.5rem);width:100%">
  <table id="t">
    <thead>
      <tr>
        <th data-col="Name">Hotel<span class="arrow">↓</span></th>
        <th data-col="Area">Area<span class="arrow">↓</span></th>
        <th data-col="Address">Full Address<span class="arrow">↓</span></th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const tbody=document.querySelector('#t tbody');
let hotels=[],cur={col:'Name',dir:1};
fetch('./hotels_geocoded.json')
  .then(r=>r.json())
  .then(d=>{
     hotels=d.map(h=>({N:h.Name||'',A:h.Area?.trim()||'',D:h.Address||''}));
     draw();
  })
  .catch(()=>tbody.innerHTML='<tr><td colspan="3" style="text-align:center">Failed to load data</td></tr>')

function draw(col='N',dir=1){
  if(col===cur.col) cur.dir*=-1; else cur={col,dir:1};
  hotels.sort((a,b)=>{
    const x=(a[col]||'').toLowerCase(),y=(b[col]||'').toLowerCase();
    const blank=!x?1:-!y;
    return blank?blank:x.localeCompare(y)*cur.dir;
  });
  tbody.innerHTML='';
  hotels.forEach(h=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${h.N}</td><td>${h.A||'—'}</td><td>${h.D}</td>`;
    tbody.appendChild(tr);
  });
  document.querySelectorAll('#t th').forEach(th=>{
    const sp=th.querySelector('.arrow');
    th.classList.toggle('asc',th.dataset.col===cur.col && cur.dir>0);
    th.classList.toggle('desc',th.dataset.col===cur.col && cur.dir<0);
    sp.textContent=(th.dataset.col===cur.col&&cur.dir<0)?'↑':'↓';
  });
}
document.querySelector('#t thead').addEventListener('click',e=>{
  const th=e.target.closest('th'); th && draw(th.dataset.col);
});
</script>

</body>
</html>
